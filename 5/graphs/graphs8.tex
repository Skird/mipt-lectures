\documentclass{article}
\input{common}

\begin{document}

\section{Свойства первого и~второго порядка}

Рассматривается семейство свойств графов, выразимое формулами первого порядка:
\begin{itemize}
	\item переменные $x, y, z, \ldots$, принимающие значения в~множестве вершин
	\item логические связки
	\item предикаты: $\sim$~--- связанность ребром, $=$~--- равенство
	\item кванторы $\forall, \exists$ по переменным
\end{itemize}

Таким образом можно выразить не все свойства. Поэтому иногда приходится рассматривать свойства
второго порядка, то есть дополнительно разрешать следующее
\begin{itemize}
	\item Символы $X, Y, Z, \ldots$, принимающие значения в~множестве предикатов конечной валентности
		на множестве вершин
	\item кванторы $\forall, \exists$ таким символам
\end{itemize}

Можно выразить свойство <<содержать чётное число вершин>>: $$\exists X \left( \forall x \exists y
\left( [X(x, y)] \land [\forall z (z \ne y) \rightarrow \neg X(x, z)] \right) \land (\forall x
\neg X(x, x)) \land (\forall x \forall y X(x, y) \leftrightarrow X(y, x)) \right)$$

Язык второго порядка называется \emph{монадическим}, если допускается только квантификация по
унарным предикатам. Монадическим языком можно записать свойство связности: нельзя разбить на два
нетривиальных подмножества, между которыми нет ребер.

Указанные свойства не могут быть выражены языком <<меньшего>> порядка. Проще всего показать это,
использую теорему Эренфойхта.

\begin{definition}
	Графы $G, H$ являются $k$-элементарно эквивалентными, если никакая формула $\phi$ первого порядка
	кванторной глубины не более $k$ не может их отличить, то есть $G \equiv_k H \Leftrightarrow
	\forall \phi (G \models \phi \Leftrightarrow G \models \phi)$.
\end{definition}

\begin{theorem}[Эренфойхт]
	Пусть $G, H$~--- графы, $k \in \mathbb{N}$. $G \equiv_k H$ тогда и~только тогда, когда
	у~Консерватора есть выигрышная стратегия в~игре $EHR(G, H, k)$.
\end{theorem}

Можно показать, что на графах $C_{3^k}$ и~$C_{3^k} \sqcup C_{3^k}$ в~$k$
раундах побеждает консерватор, что значит, что не существует первопорядковой формулы для свойства
связности.

\begin{theorem}[1969, Глебский, Коган, Лиогонький, Таланов; 1976 Фагин]
	$\forall \phi$ превопорядковой формулы $\lim\limits_{n\rightarrow \infty} P(G(n, \frac{1}{2})
	\models \phi) \in \{0, 1\}$.
\end{theorem}
\begin{theorem}[Закон 0 или 1, современная формулировка]
	Если $p = p(n): \min\{p, 1-p\} n^\alpha \rightarrow \infty \forall \alpha > 0$, а
	$\phi$ превопорядковая формула, то $\lim\limits_{n\rightarrow \infty} P(G(n, p) \models \phi)
	\in \{0, 1\}$.
\end{theorem}

\begin{corollary}[Из теоремы Эренфойхта]
	$G(n, p)$ подчиняется закону 0 или 1 для всех формул первого порядка глубины $k$ тогда и~только
	тогда, когда $$P(\text{Консерватор выигрывает в~игре } EHR(G(n, p(n)), G(m, p(m)), k))
	\underset{n,m \rightarrow \infty} \rightarrow 1$$
\end{corollary}

\begin{proof}[Закона 0 или 1]
	Рассмотрим свойство полного расширения уровня $s$: любое множество из не более, чем $s$ вершин
	расширяется еще одной вершиной так, чтобы любое указаное подмножество вершин $A$ было соединено
	с~новой вершиной, а~остальные вершины не были.

	Если $G, H$ обладают таким свойством, то у~Консерватора есть выигрышная стретегия. Оценим
	вероятность обладания таким свойством.

	$P(G(n, p) \text{ не обладает свойством полного расширения}) \le C_n^s 2^s (1 - \min\{p, 1 -
	p\}^s)^{n-s} \le e^{s \log n - \min\{p, 1 - p\}^s (n - s)} \rightarrow 0$
\end{proof}

\begin{proof}[Следствия из теоремы Эренфойхта]~\\
	$\Leftarrow$ Пусть а.п.н. есть выигрышная стратегия в~$k$ раундах, но закон 0 или 1 не выполнен.
	Тогда $\exists \phi$ глубины $k$, для которой закон не выолнен. Возможны две ситуации:
	\begin{itemize}
		\item Существует частичный предел $c \in (0, 1)$
		\item И~0, и~1 лежат в~множестве частичных пределов
	\end{itemize}

	$P(\text{Новатор побеждает}) \ge P(G^1(n_i, p) \models \phi, G^2(n_i, p) \not\models \phi) =
	P(G^1(n_i, p) \models \phi) P(G^2(n_i, p) \not\models \phi) = c(1 - c) \ne 0$ (для
	подпоследовательности, на которой достигается предел $c$). Аналогично, если есть
	подпоследовательности, на которых достигнуты пределы 0 и~1, то новатор побеждает с~вероятностью,
	стремящейся к~1.

	$\Rightarrow$ Пусть $\underline{\lim} P(\text{Консерватор побеждает}) < 1$. Тогда выберем
	подпоследовательность $(m_i, n_i): \lim P(\ldots) = \eps < 1$. В~эту сторону придётся
	воспользоваться следующим утверждением.

	\begin{claim}
		Существует лишь конечное число различных формул, выражающих различные свойства графа.
	\end{claim}

	Итак, $P(G(n_i, p) \not\equiv_k G(m_i, p)) \rightarrow 1 - \eps > 0$. Это означает то, что
	$P(\exists \phi: d(\phi) = k, G(n_i, p) \models \phi, G(m_i, p) \not\models \phi) \le
	\sum\limits_\phi P(G(n_i, p) \models \phi, G(m_i, p) \not\models \phi)$. Тогда найдётся одна
	формула $\phi$ глубины $k$, такая что $P(G(n_i, p) \models \phi, G(m_i, p) \not\models \phi) =
	p_\phi$ максимальна.  $p_\phi \ge \frac{1 - \eps}{M} > 0$. Для завершения доказательства осталось
	выбрать подпоследовательность, в~которой какая-то формула встречается бесконечное число раз.
\end{proof}

\begin{theorem}[Спенсер, Шелах, 1988]
	Пусть $p = n^{-\alpha}, \alpha > 0$. Тогда
	\begin{itemize}
		\item $\alpha \notin \mathbb{R} \Rightarrow $ закон 0 или 1
		\item $\alpha \in Q \cap (0, 1] \Rightarrow $ закон не выполнен
		\item $\alpha = 1 + \frac{1}{m} \Rightarrow $ закон не выполнен
		\item $\alpha > 1, \alpha \ne 1 + \frac{1}{m} \Rightarrow $ закон выполнен
	\end{itemize}
\end{theorem}

Для языков второго порядка закон не выполнен, так как можно записать свойство <<число вершин
чётно>>.

\begin{theorem}[Кауфманн, Шелах, 1985]
	$\exists \phi$ монадическая, такая что $P(G(n, \frac{1}{2}) \models \phi)$ не имеет предела.
\end{theorem}

\begin{theorem}[Ле Барс, 2001]
	$\exists \phi$ экзистенциальная (допускается квантификация по монадическим переменным только
	с~помощью $\exists$), для которой нет предела вероятности $P(G(n, \frac{1}{2}) \models \phi)$.
\end{theorem}

\end{document}
